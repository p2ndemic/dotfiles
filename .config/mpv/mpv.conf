# =========================
#  Profile
# =========================
profile=high-quality
quiet=yes                              # [default = no] | Display less data in the terminal

# =========================
#  Backend
# =========================
vo=gpu-next
hwdec=vaapi                            # Intel & AMD == [vaapi] or [vulkan] || Nvidia == [nvdec] or [vulkan]
gpu-api=vulkan
gpu-context=waylandvk                  # Windows == [winvk] || MacOS == [macvk]

# =========================
#  Vulkan
# =========================
vulkan-async-compute=yes               # [default = yes]
vulkan-async-transfer=yes              # [default = yes]
vulkan-swap-mode=immediate             # [default = auto] | VSync off
vulkan-queue-count=1                   # [default = 1] | values: (1..8)

# =========================
#  Lavc
# =========================
vd-lavc-dr=yes                         # [default = auto] | Enable direct rendering
vd-lavc-threads=0                      # [default = 0] | Use number of threads based on physical CPU cores (max 16)
ad-lavc-threads=0                      # [default = 1] | Use number of threads based on physical CPU cores (max 16)

# =========================
#  Cache
# =========================
cache=yes
cache-secs=60
cache-pause=yes
cache-on-disk=no
demuxer-max-bytes=512MiB
demuxer-max-back-bytes=128MiB

# =========================
#  General
# =========================
keep-open=yes
loop-playlist=inf

# =========================
#  Scale settings
# =========================

# =========================
#  Scale [good]
# =========================
scale=lanczos                          # [default = lanczos]
cscale=lanczos                         # [default = lanczos]
dscale=hermite                         # [default = hermite]

# =========================
#  Scale [quality]
# =========================
#scale=ewa_lanczos
#cscale=ewa_lanczos
#dscale=mitchell

# =========================
#  Scale [max quality]
# =========================
#scale=ewa_lanczossharp
#cscale=ewa_lanczossharp
#dscale=catmull_rom

# =========================
#  Deband
# =========================
deband=no                              # [default = no] | Activate debanding
deband-iterations=4                    # [default = 1] | Steps (More = Better quality, higher GPU cost)
deband-threshold=35                    # [default = 48] | Strength (More = Less banding, more detail loss)
deband-range=16                        # [default = 16] | Range (More = Less banding, higher GPU cost)
deband-grain=4                         # [default = 32] | Dynamic Grain (More = More dynamic grain)

# =========================
#  Deinterlace
# =========================
deinterlace=no                         # [default = no]

# =========================
#  Dither
# =========================
# [fruit]: 8-Bit/8-Bit+FRC display
# [ordered]: true 10-Bit/12-Bit display
# [error-diffusion]: high-end GPUs
# =========================
dither-depth=auto                      # [default = auto] | values: (-1..16)
#dither=error-diffusion                # [default = fruit]
#error-diffusion=sierra-lite           # [default = sierra-lite]

# =========================
#  Interpolation
# =========================
interpolation=no                       # [default = no]

# =========================
#  Other
# =========================
#target-colorspace-hint=yes            # [enable only for HDR content]
#video-sync=display-resample           # [do not use this. Fps drops]
#video-latency-hacks=yes               # [optional. Not recomended]

# =========================
#  Language priority
# =========================
alang=ru,rus,jp,jpn,ja,en,eng
slang=ru,rus,jp,jpn,ja,en,eng

# =========================
#  Audio
# =========================
volume=100
volume-max=100
audio-pitch-correction=yes             # [default = yes]
audio-stream-silence=yes               # [default = no]
audio-file-auto=fuzzy                  # [default = no] | Load all audio containing the media filename (from the current dir)
audio-file-paths-append=sa_dir         # Place your subs/audio here (create folder ./sa_dir in the current dir) — mpv will load them automatically

# =========================
#  Subtitles
# =========================
demuxer-mkv-subtitle-preroll=yes
sub-visibility=no                      # [default = yes] | Hide subtitles by default
sub-font=sans-serif                    # [default = sans-serif]
sub-font-size=48                       # [default = 38]
sub-outline-size=1                     # [default = 1.65]
sub-shadow-color=0.0/0.0/0.0/0.50      # [default = #AF000000]
sub-shadow-offset=2                    # [default = 0]
sub-auto=fuzzy                         # [default = exact] | Load all subs containing the media filename (from the current dir)
sub-file-paths-append=sa_dir           # Place your subs/audio here (create folder ./sa_dir in the current dir) — mpv will load them automatically

# =========================
#  High-quality screenshots
# =========================
screenshot-sw=no
screenshot-format=webp
screenshot-webp-lossless=yes
screenshot-high-bit-depth=yes
screenshot-tag-colorspace=yes
screenshot-directory="$XDG_PICTURES_DIR/Screenshots/mpv"
screenshot-template="screenshot_%F_%tX_%#02n"

# =========================
#  yt-dlp integration
# =========================
ytdl=yes
script-opts=ytdl_hook-ytdl_path=yt-dlp,ytdl_hook-try_ytdl_first=yes,ytdl_hook-exclude="%.3gp$|%.MOV$|%.VOB$|%.avi$|%.flv$|%.m3u$|%.m3u8$|%.m4a$|%.m4v$|%.mka$|%.mkv$|%.mov$|%.mp3$|%.mp4$|%.ogg$|%.ts$|%.vob$|%.wav$|%.webm$|%.wmv$"
ytdl-raw-options=ignore-config=,config-locations=$HOME/.config/mpv/mpv_yt-dlp.conf
ytdl-format=bestvideo*[height<=?1440]+bestaudio/bestvideo+bestaudio/best

# =========================
#  mpv test
# =========================
#mpv --input-test --force-window --idle
